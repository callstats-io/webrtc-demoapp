
<html>

<head>
  <title>Lennart's WebRTC testing</title>
</head>

<body>
  <div id="container">
    <div>
      <button id="startButton">Start</button>
      <button id="callButton">Call</button>
      <button id="hangupButton">Hang Up</button>
      <input  id="roomInput" type="text" value="Room">
    </div>

    <video id="localVideo" width="320" height="240" autoplay muted></video>
    <div id="remoteVideos"></div>
  </div>


  <script src="messaging.js"></script>

  <script src="/socket.io/socket.io.js"></script>
  <script src="signalling.js"></script>

  <script src="main.js"></script>

  <script>
    // HTTP elements
    var startButton   = document.getElementById('startButton');
    var callButton    = document.getElementById('callButton');
    var hangupButton  = document.getElementById('hangupButton');
    var roomInput     = document.getElementById('roomInput');
    var localVideo    = document.querySelector('video#localVideo');

    // startup settings
    callButton.disabled   = true;
    hangupButton.disabled = true;

    // assign functions
    startButton.onclick   = function() {
      startButton.disabled = true;
      callButton.disabled = false;
      start();
    };
    callButton.onclick    = function() {
      callButton.disabled   = true;
      roomInput.disabled    = true;
      hangupButton.disabled = false;
      call(roomInput.value);
    };
    hangupButton.onclick  = function() {
      hangupButton.disabled = true;
      roomInput.disabled    = false;
      callButton.disabled   = false;
      hangup();
    }

    function addRemoteVideo(userId,stream) {
      var v = document.createElement("video");
      v.srcObject = stream;
      v.id = userId;
      v.width = 320;
      v.height = 240;
      v.autoplay = true;

      document.getElementById("remoteVideos").append(v);
    }
    function removeRemoteVideo(userId) {
      //var v = document.getElementById(userId);
      //document.getElementById("remoteVideos").removeChild(v);
      document.getElementById(userId).remove();
    }
  </script>
</body>

</html>
